<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: clients/extension/scripts/popup.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: clients/extension/scripts/popup.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const API_URL = `https://beacon-for-ibm-dotcom-api.gz4o4xx2g28.us-south.codeengine.appdomain.cloud`;
const PAGE_URL = window.location;
const TEST_URL = `https://beacon-for-ibm-dotcom-api.gz4o4xx2g28.us-south.codeengine.appdomain.cloud/?url=https://www.ibm.com`;

/**
 * Audit current page with @ibmdotcom/beacon
 */
function auditPage() {
  // console.log(`auditing {API_URL}/?url=${PAGE_URL}`);
  // `${API_URL}/?url=${PAGE_URL}`
  // fetch(`${TEST_URL}`)
  //   .then((response) => response.json())
  //   .then((data) => console.log('data', data));
  console.log('auditing');


  chrome.tabs.query({ 'active': true, 'windowId': chrome.windows.WINDOW_ID_CURRENT },
    function (tabs) {
      window.open(`${API_URL}/?url=` + tabs[0].url);
    }
  );
  // chrome.runtime.sendMessage(`${TEST_URL}`, (response) => console.log('response:', response));
}

/**
 *
 */
async function init() {
  const analyzeBtn = document.getElementById('analyze-button');
  // const btn = document.querySelector('button.click-button');
  analyzeBtn.addEventListener('click', () => {
    auditPage();
  });
}

init();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CheckComponents.html">CheckComponents</a></li><li><a href="CheckDDO.html">CheckDDO</a></li><li><a href="CheckLegalLinks.html">CheckLegalLinks</a></li><li><a href="CheckV18.html">CheckV18</a></li></ul><h3>Global</h3><ul><li><a href="global.html#auditPage">auditPage</a></li><li><a href="global.html#getComponentsInDOM">getComponentsInDOM</a></li><li><a href="global.html#getLegalLinksInDOM">getLegalLinksInDOM</a></li><li><a href="global.html#getScriptsInDom">getScriptsInDom</a></li><li><a href="global.html#init">init</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Apr 09 2023 13:40:15 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
